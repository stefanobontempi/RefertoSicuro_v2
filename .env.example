# =====================================================
# RefertoSicuro v2 - Environment Variables (DEVELOPMENT)
# =====================================================
# Copy this file to .env and update with your values
# NEVER commit .env to git!

# ===========================================
# GENERAL CONFIGURATION
# ===========================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=debug
TZ=Europe/Rome
SECRET_KEY=your-super-secret-key-change-me-in-production

# ===========================================
# DATABASE CONFIGURATION
# ===========================================

# PostgreSQL - Main Database
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=refertosicuro_dev
POSTGRES_USER=refertosicuro
POSTGRES_PASSWORD=dev_password_change_me
DATABASE_URL=postgresql+asyncpg://refertosicuro:dev_password_change_me@localhost:5432/refertosicuro_dev

# MongoDB - Analytics
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_USER=admin
MONGODB_PASSWORD=dev_password_change_me
MONGODB_DATABASE=refertosicuro_analytics
MONGODB_URL=mongodb://admin:dev_password_change_me@localhost:27017/refertosicuro_analytics?authSource=admin

# Redis - Cache & Pub/Sub
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://localhost:6379/0

# RabbitMQ - Message Queue
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=dev_password_change_me
RABBITMQ_VHOST=refertosicuro
RABBITMQ_URL=amqp://admin:dev_password_change_me@localhost:5672/refertosicuro

# ===========================================
# JWT & AUTHENTICATION
# ===========================================
JWT_SECRET=dev_jwt_secret_key_change_me_in_production_min_32_chars
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7
PASSWORD_RESET_TOKEN_EXPIRE_HOURS=6
EMAIL_VERIFICATION_TOKEN_EXPIRE_DAYS=7

# OAuth (Optional)
OAUTH_GOOGLE_CLIENT_ID=
OAUTH_GOOGLE_CLIENT_SECRET=
OAUTH_MICROSOFT_CLIENT_ID=
OAUTH_MICROSOFT_CLIENT_SECRET=

# ===========================================
# AI SERVICES
# ===========================================

# Azure OpenAI
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_KEY=your-api-key-here
AZURE_OPENAI_API_VERSION=2024-02-01
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4o
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002

# Azure Speech Services
AZURE_SPEECH_KEY=your-speech-key-here
AZURE_SPEECH_REGION=westeurope
AZURE_SPEECH_LANGUAGE=it-IT

# OpenAI (Alternative/Fallback)
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORGANIZATION=org-your-org-id

# ===========================================
# PAYMENT PROVIDERS
# ===========================================

# Stripe
STRIPE_PUBLISHABLE_KEY=pk_test_your-key-here
STRIPE_SECRET_KEY=sk_test_your-key-here
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
STRIPE_PRICE_ID_BASIC=price_your-price-id
STRIPE_PRICE_ID_PRO=price_your-price-id
STRIPE_PRICE_ID_ENTERPRISE=price_your-price-id

# PayPal
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-client-secret
PAYPAL_MODE=sandbox # sandbox or live
PAYPAL_WEBHOOK_ID=your-webhook-id

# ===========================================
# COMMUNICATION SERVICES
# ===========================================

# SMTP Email
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@refertosicuro.it
SMTP_FROM_NAME=RefertoSicuro
SMTP_TLS=false
SMTP_SSL=false

# For production, use real SMTP:
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_TLS=true

# Twilio SMS (Optional)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=
TWILIO_MESSAGING_SERVICE_SID=

# Push Notifications (Optional)
FCM_SERVER_KEY=
APNS_KEY_ID=
APNS_TEAM_ID=
APNS_KEY_FILE=

# ===========================================
# STORAGE
# ===========================================

# MinIO / S3
S3_ENDPOINT_URL=http://localhost:9000
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin123
S3_BUCKET_NAME=refertosicuro-dev
S3_REGION=eu-west-1
S3_USE_SSL=false

# For production (AWS S3):
# S3_ENDPOINT_URL=https://s3.eu-west-1.amazonaws.com
# S3_ACCESS_KEY_ID=AKIA...
# S3_SECRET_ACCESS_KEY=...
# S3_USE_SSL=true

# ===========================================
# API GATEWAY & SERVICES
# ===========================================

# Kong Gateway
KONG_ADMIN_URL=http://localhost:8002
KONG_PROXY_URL=http://localhost:8000

# Service Ports (Internal)
AUTH_SERVICE_PORT=8010
REPORTS_SERVICE_PORT=8011
BILLING_SERVICE_PORT=8012
ADMIN_SERVICE_PORT=8013
ANALYTICS_SERVICE_PORT=8014
NOTIFICATION_SERVICE_PORT=8015

# Service URLs (for inter-service communication)
AUTH_SERVICE_URL=http://auth-service:8010
REPORTS_SERVICE_URL=http://reports-service:8011
BILLING_SERVICE_URL=http://billing-service:8012
ADMIN_SERVICE_URL=http://admin-service:8013
ANALYTICS_SERVICE_URL=http://analytics-service:8014
NOTIFICATION_SERVICE_URL=http://notification-service:8015

# ===========================================
# FRONTEND
# ===========================================
FRONTEND_URL=http://localhost:5173
ADMIN_FRONTEND_URL=http://localhost:5174

# Vite Environment Variables (prefix with VITE_)
VITE_API_URL=http://localhost:8000
VITE_APP_NAME=RefertoSicuro
VITE_APP_VERSION=2.0.0
VITE_ENVIRONMENT=development
VITE_SENTRY_DSN=

# ===========================================
# MONITORING & OBSERVABILITY
# ===========================================

# Sentry
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Prometheus
PROMETHEUS_URL=http://localhost:9090
PROMETHEUS_PUSHGATEWAY_URL=http://localhost:9091

# Grafana
GRAFANA_URL=http://localhost:3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=grafana_password

# Jaeger
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_SAMPLING_RATE=0.1

# ===========================================
# SECURITY & RATE LIMITING
# ===========================================

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE_ANONYMOUS=10
RATE_LIMIT_PER_MINUTE_AUTHENTICATED=100
RATE_LIMIT_PER_MINUTE_PRO=300
RATE_LIMIT_PER_MINUTE_ENTERPRISE=1000

# CORS
CORS_ORIGINS=http://localhost:5173,http://localhost:5174,http://localhost:3000
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOW_HEADERS=Content-Type,Authorization,X-Requested-With,X-CSRF-Token

# CSRF Protection
CSRF_ENABLED=true
CSRF_SECRET_KEY=csrf-secret-key-change-me

# Security Headers
HSTS_ENABLED=false # Enable in production with HTTPS
CSP_ENABLED=true
X_FRAME_OPTIONS=DENY

# ===========================================
# FEATURE FLAGS
# ===========================================
FEATURE_REGISTRATION_ENABLED=true
FEATURE_SOCIAL_LOGIN_ENABLED=false
FEATURE_API_KEYS_ENABLED=true
FEATURE_VOICE_INPUT_ENABLED=true
FEATURE_HL7_EXPORT_ENABLED=false
FEATURE_MARKETPLACE_ENABLED=false
FEATURE_MULTI_LANGUAGE_ENABLED=false

# ===========================================
# COMPLIANCE & GDPR
# ===========================================
GDPR_DATA_RETENTION_DAYS=30
GDPR_AUDIT_LOG_RETENTION_DAYS=730
GDPR_AUTO_DELETE_ENABLED=true
GDPR_ANONYMIZATION_ENABLED=true

# ===========================================
# DEVELOPMENT TOOLS
# ===========================================

# pgAdmin
PGADMIN_DEFAULT_EMAIL=admin@refertosicuro.local
PGADMIN_DEFAULT_PASSWORD=pgadmin_password

# Portainer
PORTAINER_ADMIN_PASSWORD=portainer_password

# Swagger
SWAGGER_ENABLED=true
SWAGGER_TITLE=RefertoSicuro API
SWAGGER_VERSION=2.0.0

# ===========================================
# TESTING
# ===========================================
TEST_DATABASE_URL=postgresql+asyncpg://refertosicuro:test_password@localhost:5433/refertosicuro_test
TEST_REDIS_URL=redis://localhost:6380/0
TEST_RABBITMQ_URL=amqp://admin:test_password@localhost:5673/refertosicuro_test

# ===========================================
# BACKUP & RECOVERY
# ===========================================
BACKUP_ENABLED=false
BACKUP_S3_BUCKET=refertosicuro-backups
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=

# ===========================================
# EXTERNAL INTEGRATIONS (Optional)
# ===========================================

# HL7/FHIR Server
FHIR_SERVER_URL=
FHIR_SERVER_AUTH_TOKEN=

# DICOM Server
DICOM_SERVER_HOST=
DICOM_SERVER_PORT=
DICOM_SERVER_AE_TITLE=

# RIS/PACS Integration
RIS_API_URL=
RIS_API_KEY=
PACS_API_URL=
PACS_API_KEY=